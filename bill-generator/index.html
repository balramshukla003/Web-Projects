<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Universal Invoice Generator</title>
    <!-- Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- PDF Library -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
    <!-- Custom CSS -->
    <link rel="stylesheet" href="style.css">
</head>
<body>

    <div class="app-container">
        
        <!-- LEFT PANEL: CONTROLS ONLY -->
        <div class="controls-panel">
            <div class="panel-header">
                <h2><i class="fas fa-sliders-h"></i> Bill Controls</h2>
            </div>
            
            <div class="form-content">
                
                <!-- 1. Logo Upload -->
                <div class="control-group">
                    <label>Upload Logo</label>
                    <input type="file" id="logoInput" accept="image/*">
                </div>

                <!-- 2. Visibility Toggles -->
                <div class="control-group">
                    <h3><i class="fas fa-eye"></i> Show / Hide Details</h3>
                    <div class="toggle-grid">
                        <label><input type="checkbox" checked onchange="toggleVis('logo-area')"> Logo</label>
                        <label><input type="checkbox" checked onchange="toggleVis('comp-gst')"> My GST/Reg</label>
                        <label><input type="checkbox" checked onchange="toggleVis('comp-web')"> My Website</label>
                        <label><input type="checkbox" checked onchange="toggleVis('comp-phone')"> My Phone</label>
                        
                        <hr>

                        <label><input type="checkbox" checked onchange="toggleVis('cl-addr')"> Client Addr</label>
                        <label><input type="checkbox" checked onchange="toggleVis('cl-mobile')"> Client Mobile</label>
                        <label><input type="checkbox" checked onchange="toggleVis('cl-email')"> Client Email</label>
                        <label><input type="checkbox" checked onchange="toggleVis('cl-extra')"> Client Extra</label>

                        <hr>

                        <label><input type="checkbox" checked onchange="toggleVis('meta-inv')"> Invoice No</label>
                        <label><input type="checkbox" checked onchange="toggleVis('meta-date')"> Date</label>
                        
                        <hr>
                        <!-- Column Toggles -->
                        <label><input type="checkbox" checked onchange="toggleCol('col-qty')"> Qty Column</label>
                        <label><input type="checkbox" checked onchange="toggleCol('col-rate')"> Rate Column</label>
                        
                        <hr>
                        
                        <label><input type="checkbox" checked onchange="toggleVis('sec-footer')"> Footer & Sign</label>
                    </div>
                </div>

                <!-- 3. Actions -->
                <div class="control-group">
                    <h3>Actions</h3>
                    <button class="btn btn-secondary" onclick="addRow()"><i class="fas fa-plus"></i> Add New Row</button>
                    <div style="margin-top: 10px;">
                        <label style="font-size: 12px;">Theme Color:</label>
                        <input type="color" value="#333333" onchange="changeColor(this.value)" style="height: 40px; padding: 2px;">
                    </div>
                </div>

                <div class="download-section">
                    <button class="btn btn-primary" onclick="generatePDF()"><i class="fas fa-file-pdf"></i> Download PDF</button>
                    <p class="hint"><i class="fas fa-info-circle"></i> <strong>Tip:</strong> Click directly on the Bill (Right Side) to edit text, prices, and totals manually.</p>
                </div>
            </div>
        </div>

        <!-- RIGHT PANEL: EDITABLE BILL -->
        <div class="preview-panel">
            <div id="invoice-doc" class="invoice-paper">
                
                <!-- HEADER -->
                <div class="header-section">
                    <div class="logo-area" id="logo-area">
                        <img id="disp_logo" src="https://via.placeholder.com/150x80?text=LOGO" alt="Logo">
                    </div>
                    
                    <div class="company-info">
                        <h1 contenteditable="true" class="editable">YOUR COMPANY NAME</h1>
                        <p contenteditable="true" class="editable">123, Business Street, City, State, Zip</p>
                        
                        <div class="contact-row">
                            <span id="comp-phone" contenteditable="true" class="editable">Ph: +91 98765 43210</span>
                            <span id="comp-web" contenteditable="true" class="editable"> | www.website.com</span>
                        </div>
                        <div id="comp-gst" contenteditable="true" class="editable">GSTIN: 29ABCDE1234F1Z5</div>
                    </div>

                    <div class="bill-title">
                        <h2 contenteditable="true" class="editable theme-text">INVOICE</h2>
                    </div>
                </div>

                <hr class="divider theme-bg">

                <!-- CLIENT & META GRID -->
                <div class="info-grid">
                    <div class="col-client">
                        <div class="lbl theme-text">BILL TO:</div>
                        <div contenteditable="true" class="editable client-name">Client Name Here</div>
                        <div id="cl-addr" contenteditable="true" class="editable">Client Address Line 1, City</div>
                        <div id="cl-mobile" contenteditable="true" class="editable">Mobile: 99999 88888</div>
                        <div id="cl-email" contenteditable="true" class="editable">Email: client@email.com</div>
                        <div id="cl-extra" contenteditable="true" class="editable">Aadhar/ID: XXXXX XXXXX</div>
                    </div>
                    <div class="col-meta">
                        <div class="meta-row" id="meta-inv">
                            <span contenteditable="true" class="editable lbl">Invoice No:</span>
                            <span contenteditable="true" class="editable val">INV-001</span>
                        </div>
                        <div class="meta-row" id="meta-date">
                            <span contenteditable="true" class="editable lbl">Date:</span>
                            <span contenteditable="true" class="editable val" id="date-val">2023-01-01</span>
                        </div>
                    </div>
                </div>

                <!-- TABLE -->
                <div class="table-wrapper">
                    <table id="inv-table">
                        <thead class="theme-bg">
                            <tr>
                                <th width="5%" class="no-print">Del</th> <!-- Delete Btn -->
                                <th width="5%">#</th>
                                <th width="45%" contenteditable="true" class="editable">Description / Particulars</th>
                                <th width="15%" class="col-qty" contenteditable="true" class="editable">Qty/Days</th>
                                <th width="15%" class="col-rate" contenteditable="true" class="editable">Rate</th>
                                <th width="15%" contenteditable="true" class="editable" style="text-align:right;">Amount</th>
                            </tr>
                        </thead>
                        <tbody id="table-body">
                            <!-- Rows added via JS -->
                        </tbody>
                    </table>
                </div>

                <!-- TOTALS SECTION -->
                <div class="totals-layout">
                    <div class="words-area">
                        <span class="lbl">Amount in Words:</span><br>
                        <span id="amount-words" class="val italic">Zero Only</span>
                    </div>
                    <div class="math-area">
                        <div class="math-row">
                            <span contenteditable="true" class="editable lbl">Sub Total:</span>
                            <span id="val-subtotal" class="val">0.00</span>
                        </div>
                        <div class="math-row">
                            <span contenteditable="true" class="editable lbl">Tax / Add (+):</span>
                            <span contenteditable="true" class="editable val input-look" id="val-tax" oninput="calcTotals()">0.00</span>
                        </div>
                        <div class="math-row grand-total theme-text">
                            <span contenteditable="true" class="editable lbl">Total:</span>
                            <span id="val-grand" class="val">0.00</span>
                        </div>
                    </div>
                </div>

                <!-- FOOTER -->
                <div class="footer-section" id="sec-footer">
                    <div class="notes">
                        <strong>Terms & Conditions:</strong>
                        <div contenteditable="true" class="editable">
                            1. Goods once sold will not be taken back.<br>
                            2. Interest @18% pa will be charged on late payment.
                        </div>
                    </div>
                    <div class="signature">
                        <div class="sign-line"></div>
                        <div contenteditable="true" class="editable" style="text-align:center;">Authorized Signatory</div>
                    </div>
                </div>

            </div>
        </div>
    </div>

    <script src="script.js"></script>
</body>
</html>